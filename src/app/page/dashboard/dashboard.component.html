<button *ngIf="role === 'admin' && !loading " (click)="addbus()" class="btn btn-primary">add bus</button>

<button *ngIf="role === 'user' && !loading" (click)="showform = true" class="btn btn-primary"><i class="fa-solid fa-magnifying-glass-location"></i> Serch Bus </button>

<app-loading *ngIf="loading"></app-loading>
<div *ngIf="!loading && showform" class="container full-height d-flex justify-content-center align-items-center">
  <div class="signup-form">
    <div>
      <form [formGroup]="searchBusForm" (ngSubmit)="onSubmit()">
        <button *ngIf="isedit" type="button" class="ms-auto mt-3 border-0 rounded bg-transparent" routerLink="/" (click)="this.searchBusForm.reset(); isedit=false"><i class="pi pi-times"></i></button>

        <label class="fs-1 fw-1" aria-hidden="true" *ngIf="!isedit">Search Bus</label>

        <div class="form-floating">
          <input [ngClass]="{'form-control':true , 'border-danger': searchBusForm.get('departure')?.invalid && searchBusForm.get('departure')?.touched}" for="departure" type="text" formControlName="departure" placeholder="" required="">

          <div class="text-danger" *ngIf="searchBusForm.get('departure')?.invalid && searchBusForm.get('departure')?.touched">
            departure is required .
          </div>

          <label for="floatingTextarea">Bus departure</label>
        </div>

        <div class="form-floating">
          <input [ngClass]="{'form-control' : true , 'border-danger' : searchBusForm.get('destination')?.invalid && searchBusForm.get('destination')?.touched}" for="destination" type="text" formControlName="destination" placeholder="" required="">

          <div class="text-danger" *ngIf="searchBusForm.get('destination')?.invalid && searchBusForm.get('destination')?.touched">
            departure is required.
          </div>

          <label for="floatingTextarea">Bus destination</label>
        </div>

        <div class="form-floating">
          <input [ngClass]="{'form-control' : true , 'border-danger' : searchBusForm.get('bookingDate')?.invalid && searchBusForm.get('bookingDate')?.touched}" for="bookingDate" type="date" formControlName="bookingDate" placeholder="" required="">

          <div class="text-danger" *ngIf="searchBusForm.get('bookingDate')?.invalid && searchBusForm.get('bookingDate')?.touched">
            booking Date is required.
          </div>

          <label for="floatingTextarea">Bus booking Date</label>
        </div>

        <div class="form-floating my-2">

          <select class="form-select" aria-label="Default select example" formControlName="seat" placeholder="">
            <option class="bg-dark" value="1">One</option>
            <option class="bg-dark" value="2">Two</option>
            <option class="bg-dark" value="3">Three</option>
            <option class="bg-dark" value="4">Four</option>
            <option class="bg-dark" value="5">Five</option>
            <option class="bg-dark" value="6">Six</option>
          </select>
          <label for="floatingTextarea">Number of Seat </label>
          <div class="text-danger" *ngIf="searchBusForm.get('seat')?.invalid && searchBusForm.get('seat')?.touched">
            Bus Seat is required.
          </div>
        </div>

        <div class="form-floating my-4">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" formControlName="isSingleLady" (change)="singleLady($event)" required="">
            <label class="form-check-label mx-2 my-1" for="flexCheckIndeterminate">
              Single Lady
            </label>
          </div>
        </div>

        <button class="button-primary" type="submit">Search Bus </button>
      </form>
    </div>
  </div>
</div>



<div *ngIf="!loading" class="d-flex flex-wrap gap-3 mt-5 container">
  <div class="card post p-3" *ngFor="let b of buses">
    <div>
      <i class="fa-solid fa-bus-simple fa-2x"></i>
    </div>
    <div>
      <div class="title fs-2 fw-1">
        {{b.busNumber}}
      </div>

      <div class="title fs-4 fw-5">
        Departure : {{b.departure}}
      </div>

      <div class="title fs-4 fw-5">
        Destination : {{b.destination}}
      </div>

      <div class="description text-truncate">
        {{b.departureTime}}
      </div>

      <div class="d-flex justify-content-between mt-2">
        <a *ngIf="role === 'admin'" (click)="onbusUpdate(b)"><button class="btn-lg btn button"> <i class="text-primary fa-solid fa-2x fa-pen-to-square"></i> </button></a>
        <button *ngIf="role === 'admin'" class="text-danger btn" (click)="ondelete(b)"><i class="fa-regular fa-trash-can fa-2x"></i></button>
        <button *ngIf="searching" (click)="bookBus(b)" class="btn"><img style="width: 60px; " class="img-fluid" src="../../../assets/Ecostyle_leather_seats.png" alt=""></button>
      </div>
    </div>

  </div>

</div>